<div class="relative bg-[#201a23] min-h-screen text-white">
  <!-- Header Section with Gradient -->
  <div class="relative w-full h-[150px] md:h-[130px]">
    <div class="absolute inset-0 bg-gradient-to-b from-transparent to-[#201a23]"></div>
    <div class="absolute inset-0 bg-[#201a23] bg-opacity-40"></div>

    <div class="relative z-20 h-full flex flex-col items-center justify-center px-4 md:px-16">
      <h1 class="text-2xl md:text-4xl font-bold mb-4 md:mb-6 text-center">AI Content Recommendations</h1>

      <!-- Search Bar -->
      <div class="w-full max-w-xl flex flex-row gap-2 items-center justify-center">
        <input type="text" [(ngModel)]="userQuery" [placeholder]="currentPromt()" 
               class="w-full max-w-md bg-[#28202b] border border-gray-700 text-gray-300 p-2 rounded-lg
                      focus:outline-none focus:ring-2 focus:ring-slate-500 transition-all duration-300
                      text-sm" />
        <button (click)="getRecommendations()" 
                class="px-4 py-2 bg-[#3a2e3d] hover:bg-[#4a3e4d] text-white rounded-lg
                       transition duration-300 flex items-center justify-center gap-2
                       text-sm whitespace-nowrap">
          <span class="material-icons text-base">auto_awesome</span>
          Curate
        </button>
      </div>
    </div>
  </div>

  <!-- Main Content Section -->
  <div class="px-4 md:px-8 py-2 md:py-1">
    <!-- Loading State -->
    @if (isLoading) {
      <div class="flex flex-col items-center justify-center p-2 rounded-lg">
        <p class="text-lg md:text-xl font-bold mb-3 text-center">
          {{ isSecondStage ? "Searching online with AI..." : "Using offline AI recommendations..." }}
        </p>
        <p class="text-gray-400 mb-2 text-center max-w-2xl px-4">
          {{ currentQuote() }}
        </p>
        <div class="flex items-center space-x-3 mb-4">
          <div class="w-3 h-3 bg-slate-500 rounded-full animate-bounce"></div>
          <div class="w-3 h-3 bg-slate-500 rounded-full animate-bounce [animation-delay:0.2s]"></div>
          <div class="w-3 h-3 bg-slate-500 rounded-full animate-bounce [animation-delay:0.4s]"></div>
        </div>
      </div>
    }

    <!-- Toggle Buttons -->
    @if (currentRecommendations().length > 0) {
      <div class="w-full flex justify-center px-4 md:px-16 py-4">
        <div class="w-full max-w-3xl flex flex-col md:flex-row justify-center items-center gap-4">
          <div class="flex flex-wrap gap-4 justify-center items-center">
            <mat-button-toggle-group [(ngModel)]="mediaFilter" class="bg-[#28202b]">
              <mat-button-toggle value="all" class="text-gray-300">All</mat-button-toggle>
              <mat-button-toggle value="movies" class="text-gray-300">
                <span class="material-icons mr-1">theaters</span>Movies
              </mat-button-toggle>
              <mat-button-toggle value="series" class="text-gray-300">
                <span class="material-icons mr-1">live_tv</span>Series
              </mat-button-toggle>
            </mat-button-toggle-group>
  
            <mat-button-toggle-group [(ngModel)]="sortOrder" class="bg-[#28202b]">
              <mat-button-toggle value="newest" class="text-gray-300">Newest First</mat-button-toggle>
              <mat-button-toggle value="oldest" class="text-gray-300">Oldest First</mat-button-toggle>
            </mat-button-toggle-group>
          </div>
        </div>
      </div>
    }

  <!-- Results Sliders -->
  @for (curation of filteredCurations; track curation.query) {
    <div class="space-y-8 mb-12">
      @if (curation.items.length > 0) {
        <section>
          <h2 class="text-2xl md:text-3xl font-bold mb-4">Curation: "{{ curation.query }}":</h2>
          <app-slider 
            cardType="movies" 
            [items]="curation.items" 
            overview="overview"
            [titleField]="'a' "
            [subtitleField]="'a' ">
          </app-slider>
        </section>
      }
    </div>
  }
  </div>
</div>